@layout MainLayout
@using PizzaPlace.Shared


@page "/"

<!--    Start Menu -->
<PizzaList  Title="Our selection of pizza"
            Menu="@State.Menu"
            Selected="@(async (pizza)
            => AddToBasket(pizza))"/>
<!--    End Menu-->
<!-- Display Shopping Cart-->
<ShoppingBasket 
Title="Your current order"
Basket="@State.Basket"
GetPizzaFromId="@State.Menu.GetPizza"
Selected="@((pos)=> RemoveFromBasket(pos))"
/>
<!-- End Shopping Cart-->
<!-- Customer Entry-->
<CustomerEntry Title="Please enter your details below"
               ButtonTitle="Checkout"
               ButtonClass="btn btn-primary"
               Customer="@State.Basket.Customer"
               Submit="@PlaceOrder"
               />
<!-- End Customer Entry-->
@code {
    private State State { get; } = new State()
        {
    Menu = new Menu
        {
            Pizzas = new List<Pizza>
            {
                new Pizza(1,"Pepperoni",8.99M,Spiciness.Spicy),
                new Pizza(2,"Margarita",7.99M,Spiciness.None),
                new Pizza(3,"Diabolo",9.99M,Spiciness.Hot)
            }
        }
        };
        private string SpicinessImage(Spiciness spiciness)=>
        $"images/{spiciness.ToString().ToLower()}.png";
        private void AddToBasket(Pizza pizza)
        {
            Console.WriteLine($"Added Pizza successfully{pizza.Name}");
            State.Basket.Add(pizza.Id);
        }
        private void RemoveFromBasket(int pos)
        {
            Console.WriteLine($"Pizza is removed from the cart {pos}");
            State.Basket.RemoveAt(pos);
        }
        private void PlaceOrder()
        {
             Console.WriteLine("Placing order");
        }
}